<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë””ëª¨ì™€ í•¨ê»˜ í•˜ëŠ” ìƒìƒ ë†€ì´í„°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- í°íŠ¸: ì„±ëŠ¥ ìµœì í™” -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

  <style>
    :root{
      --main:#5cab6d; --accent:#a5e6b8; --bg:#f8fff9; --text:#173322;
      --shadow:0 12px 40px rgba(0,0,0,.16);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:'Jua',sans-serif;background:var(--bg);color:var(--text)}
    .screen{display:none}.screen.active{display:block}

    /* íŒŒìŠ¤í…” ì›€ì§ì„ ë°°ê²½ */
    .pattern{
      position:fixed; inset:0; z-index:-3; pointer-events:none; opacity:.7;
      background:
        radial-gradient(circle at 12% 15%, rgba(165,230,184,.25) 0 140px, transparent 150px),
        radial-gradient(circle at 88% 25%, rgba(169,214,255,.22) 0 120px, transparent 130px),
        radial-gradient(circle at 18% 85%, rgba(255,214,232,.22) 0 140px, transparent 150px),
        radial-gradient(circle at 80% 82%, rgba(255,234,167,.20) 0 130px, transparent 140px);
      animation:dimo-bg-move 28s linear infinite;
    }
    @keyframes dimo-bg-move{
      0%{background-position:0 0,0 0,0 0,0 0}
      100%{background-position:600px 360px,-520px 480px,300px -420px,-300px 300px}
    }

    /* ë²„íŠ¼ */
    .btn{
      border:none;border-radius:28px;padding:14px 28px;font-size:18px;font-weight:800;
      cursor:pointer;white-space:nowrap;min-width:220px;position:relative;z-index:10;
    }
    .btn-primary{background:linear-gradient(90deg,#7bd49a,#4aa06b);color:#fff;box-shadow:0 8px 18px rgba(0,0,0,.12)}
    .btn-primary:hover{filter:brightness(1.05);transform:translateY(-1px)}
    .btn:active{animation:jelly .6s}
    @keyframes jelly{0%{transform:scale(1)}30%{transform:scale(.95,1.05)}60%{transform:scale(1.05,.95)}100%{transform:scale(1)}}

    /* í…Œë§ˆ ìŠ¤ìœ„ì²˜ */
    .theme-switch{
      position:fixed;top:10px;right:10px;z-index:2000;
      display:flex;gap:8px;padding:6px 10px;border-radius:999px;
      background:rgba(255,255,255,.7);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);
      box-shadow:0 4px 14px rgba(0,0,0,.12)
    }
    .theme-switch .sw{
      width:22px;height:22px;border:none;border-radius:50%;cursor:pointer;box-shadow:inset 0 0 0 2px rgba(0,0,0,.08)
    }
    .theme-switch .sw[data-theme="mint"]{  background:conic-gradient(#7bd49a,#4aa06b)}
    .theme-switch .sw[data-theme="night"]{ background:conic-gradient(#1f2937,#111827)}
    .theme-switch .sw[data-theme="sun"]{   background:conic-gradient(#ffd166,#fca311)}
    .theme-switch .sw[data-theme="peach"]{ background:conic-gradient(#ffb3b3,#ff7f7f)}
    .theme-switch .sw[data-theme="blue"]{  background:conic-gradient(#8ac7ff,#4f92ff)}
    .theme-switch .sw.pop{ animation:sw-pop .2s ease-out }
    @keyframes sw-pop{0%{transform:scale(1)}50%{transform:scale(1.25)}100%{transform:scale(1)}}

    /* ì¸íŠ¸ë¡œ */
    .intro{
      min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
      gap:12px;padding:20px;text-align:center;background:linear-gradient(180deg,#f8fff9 0%, #e9fdee 100%);
      position:relative;padding-top:clamp(24px,8vh,72px);
    }
    .intro-top{margin:0;color:#2c7a4c;font-size:36px}
    .intro-top.wave span{display:inline-block;animation:waveChar 1.6s ease-in-out infinite}
    @keyframes waveChar{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
    .intro-main{
      margin:0;font-size:60px;line-height:1.1;
      background:linear-gradient(90deg,#A5E6B8,#A9D6FF,#FFD6E8,#FFEAA7,#A5E6B8);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:300% 100%;
      animation:shine 6s linear infinite; text-shadow:0 4px 10px rgba(0,0,0,.08);
    }
    @keyframes shine{0%{background-position:0%}100%{background-position:100%}}
    video{width:780px;max-width:100%;border-radius:18px;box-shadow:var(--shadow)}
    .footer-logo{
      position:absolute;left:50%;transform:translateX(-50%);bottom:12px;
      font-size:30px;color:#0b2a6f;letter-spacing:1px;
    }
    .intro-footer{ bottom:18px; }

    /* ì¸íŠ¸ë¡œ ë²„ë¸”(ì¸íŠ¸ë¡œ í™”ë©´ì—ì„œë§Œ ë Œë”) */
    .bubbles{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:-2}
    .bubbles span{
      position:absolute;bottom:-120px;border-radius:50%;
      background:radial-gradient(circle, rgba(255,255,255,.7), rgba(255,255,255,0.2));
      box-shadow:0 8px 24px rgba(0,0,0,.08);
      animation:floatUp linear infinite;opacity:.55
    }
    @keyframes floatUp{0%{transform:translateY(0) scale(.9)}100%{transform:translateY(-120vh) scale(1.1)}}
    .bubbles span:nth-child(1){left:8%;width:60px;height:60px;animation-duration:14s;animation-delay:-2s}
    .bubbles span:nth-child(2){left:18%;width:28px;height:28px;animation-duration:11s;animation-delay:-6s}
    .bubbles span:nth-child(3){left:28%;width:44px;height:44px;animation-duration:13s;animation-delay:-4s}
    .bubbles span:nth-child(4){left:38%;width:26px;height:26px;animation-duration:10s;animation-delay:-3s}
    .bubbles span:nth-child(5){left:48%;width:52px;height:52px;animation-duration:16s;animation-delay:-8s}
    .bubbles span:nth-child(6){left:58%;width:36px;height:36px;animation-duration:12s;animation-delay:-1s}
    .bubbles span:nth-child(7){left:68%;width:64px;height:64px;animation-duration:18s;animation-delay:-5s}
    .bubbles span:nth-child(8){left:78%;width:24px;height:24px;animation-duration:9s; animation-delay:-7s}
    .bubbles span:nth-child(9){left:22%;width:80px;height:80px;animation-duration:20s;animation-delay:-9s}
    .bubbles span:nth-child(10){left:72%;width:40px;height:40px;animation-duration:15s;animation-delay:-11s}
    .bubbles span:nth-child(11){left:12%;width:32px;height:32px;animation-duration:12s;animation-delay:-12s}
    .bubbles span:nth-child(12){left:85%;width:56px;height:56px;animation-duration:17s;animation-delay:-13s}

    @media (max-width:480px){
      .intro-main{font-size:50px}
      .intro-top{font-size:32px}
      video{ width:92vw; }
    }

    /* í¼ */
    .wrap{max-width:740px;margin:0 auto;padding:16px}
    form{background:#fff;border:3px solid var(--accent);border-radius:20px;padding:22px;box-shadow:0 8px 20px rgba(0,0,0,.08)}
    .form-group{margin-bottom:18px}
    label{display:block;margin-bottom:8px;color:#1e3e2d;font-weight:900}
    input,select,textarea{
      width:100%;font-family:'Jua',sans-serif;font-size:16px;border:2px solid #d3f2db;border-radius:12px;padding:12px;background:#fff;
      transition:border .15s, box-shadow .15s
    }
    input:focus,select:focus,textarea:focus{outline:none;border-color:var(--main);box-shadow:0 0 0 3px rgba(92,171,109,.18)}
    textarea{min-height:110px;resize:vertical}

    /* ê²Œì´ì§€ + ì¹´ìš´í„° */
    .gauge-row{display:flex;align-items:center;gap:10px;margin-top:6px}
    .gauge{flex:1;background:#eef6ef;border-radius:12px;height:18px;overflow:hidden;position:relative;box-shadow:inset 0 2px 4px rgba(0,0,0,.06)}
    .gauge-bar{height:100%;width:0%;background:#ffcc00;transition:width .35s ease, background .35s ease}
    .gcount{min-width:48px;text-align:right;font-weight:900;color:#2d4d38;opacity:.9}
    .gmsg{margin-top:8px;font-size:16px;color:#2d4d38;min-height:1.6em}

    /* ê²°ê³¼ ì¹´ë“œ */
    .card{position:relative;background:#fff;border:3px solid var(--accent);border-radius:20px;padding:16px 16px 64px;
      max-width:740px;margin:0 auto;box-shadow:0 10px 22px rgba(0,0,0,.12);overflow:hidden}
    .banner{margin:0 0 10px;text-align:center;color:#2d4d38;font-size:24px}
    .card-body{display:grid;grid-template-columns:minmax(110px,160px) 1fr;gap:12px;align-items:flex-start}
    .dimo{width:clamp(108px,26vw,150px);border-radius:16px;display:none}
    .ratings{display:grid;gap:8px}
    .rating{display:flex;flex-direction:column;gap:6px;background:#f9fffb;border:2px solid #d3f2db;border-radius:10px;padding:10px 12px}
    .rating h3{margin:0;font-size:16px;color:#2d4d38}
    /* ì¹­ì°¬ ë°•ìŠ¤(ì´ë¯¸ì§€ ì˜†) */
    .cbox{
      background:#f3fff7;border:2px solid #cdeed8;border-radius:12px;padding:10px 12px;margin-bottom:8px;
      font-size:17px;font-weight:900;color:#14543a;display:flex;align-items:center;gap:8px
    }

    /* ë³„ì  */
    .stars{display:flex;gap:6px;white-space:nowrap;font-size:24px}
    .star{position:relative;color:#d8d8d8}
    .star.full{color:#ffcc00;text-shadow:1px 1px 6px rgba(255,204,0,.7)}
    .star.half::before{content:"â˜…";position:absolute;left:0;top:0;width:50%;overflow:hidden;color:#ffcc00;text-shadow:1px 1px 6px rgba(255,204,0,.7)}
    /* ì ë“± ì‹œ í•œ ë²ˆ ìŠ¤ìœ½ ë¹›(ê¸€ë¦°íŠ¸) */
    .star.full::after,.star.half::after{
      content:"";position:absolute;top:0;left:-120%;width:120%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.9),transparent);animation:glint .35s ease-out
    }
    @keyframes glint{to{left:120%}}
    /* ===== ìƒˆë¡œ ì¶”ê°€: ìˆœì°¨ ì ë©¸(ë°˜ì§ë°˜ì§) ===== */
    .star.blink{animation:glowBlink 1.8s ease-in-out infinite}
    @keyframes glowBlink{
      0%,100%{filter:drop-shadow(0 0 0 rgba(255,204,0,0)); transform:scale(1)}
      50%{filter:drop-shadow(0 0 12px rgba(255,204,0,.95)); transform:scale(1.08)}
    }

    /* ë°œëª…ì/ë°œëª…í’ˆ(ì„¸ë¡œ) */
    .info{
      margin-top:10px;padding:10px 12px;border-radius:12px;border:2px solid #d3f2db;background:#fafffa;
      text-align:center;font-size:16px;display:flex;flex-direction:column;gap:6px;align-items:center
    }
    .info strong{color:var(--main)}

    /* ìŠ¤íƒ¬í”„(ë¦¬ì–¼, ìš°í•˜ë‹¨ ê³ ì • 20% ì¶•ì†Œ) */
    #stampArea{position:absolute;inset:0;pointer-events:none}
    .stamp-wrap{position:absolute}
    .stamp-img{width:100%;display:block;filter:drop-shadow(0 6px 12px rgba(0,0,0,.12));transform-origin:center;opacity:.97}
    .stamp-enter{animation:pop .52s cubic-bezier(.18,1.4,.22,1) forwards, stamp-shiver .22s ease-out .52s 1}
    @keyframes pop{0%{opacity:0;transform:translateY(-14px) scale(1.25) rotate(var(--r,-4deg))}65%{opacity:1;transform:translateY(0) scale(.96) rotate(var(--r,-4deg))}100%{transform:scale(1) rotate(var(--r,-4deg))}}
    @keyframes stamp-shiver{0%{transform:translate(0,0) rotate(var(--r,-4deg))}40%{transform:translate(-0.6px,0.4px) rotate(calc(var(--r,-4deg) + .4deg))}70%{transform:translate(0.4px,-0.6px) rotate(calc(var(--r,-4deg) - .3deg))}100%{transform:translate(0,0) rotate(var(--r,-4deg))}}
    .stamp-wrap .ink-bleed{position:absolute;inset:-4px;border-radius:50%;background:radial-gradient(circle, rgba(200,0,0,.16) 56%, rgba(200,0,0,0) 74%);filter:blur(1.2px);opacity:0;mix-blend-mode:multiply;animation:ink-bleed .7s ease-out .12s forwards}
    @keyframes ink-bleed{0%{opacity:0;transform:scale(.96)}100%{opacity:.75;transform:scale(1)}}
    .stamp-wrap .stamp-puff{position:absolute;inset:0;border-radius:50%;border:3px solid rgba(200,0,0,.35);opacity:0;filter:blur(.3px);animation:puff .6s ease-out .05s forwards}
    @keyframes puff{0%{transform:scale(.7);opacity:.55}100%{transform:scale(1.35);opacity:0}}

    /* ì €ì¥/í† ìŠ¤íŠ¸/í•˜íŠ¸ */
    .center{text-align:center;margin-top:14px}
    .btn-save{background:linear-gradient(135deg,#bff3c8,#8de0d3);color:#0f3a30;font-weight:900;min-width:320px}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:20px;background:#2c7a4c;color:#fff;padding:12px 16px;border-radius:10px;
      font-weight:800;box-shadow:0 10px 20px rgba(0,0,0,.18);opacity:0;visibility:hidden;transition:.25s;z-index:9999}
    .toast.show{opacity:1;visibility:visible}
    #fxLayer{position:fixed;inset:0;pointer-events:none;z-index:3000}
    .heart{position:fixed;width:14px;height:14px;background:#ff5a7a;transform:rotate(45deg);opacity:.95;animation:floatHeart 1.8s ease-out forwards}
    .heart::before,.heart::after{content:"";position:absolute;width:14px;height:14px;border-radius:50%;background:#ff5a7a}
    .heart::before{left:-7px;top:0}.heart::after{top:-7px;left:0}
    @keyframes floatHeart{0%{transform:translateY(0) rotate(45deg) scale(.8);opacity:1}100%{transform:translateY(-160px) rotate(45deg) scale(1.1);opacity:0}}

    @media (prefers-reduced-motion: reduce){
      *{animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important}
      .bubbles{display:none !important}
    }
    @media (max-width:480px){ .card-body{grid-template-columns:1fr} }
  </style>

  <!-- â–¼â–¼â–¼ [ì¶”ê°€] íŒ”ë ˆíŠ¸ ì•„ì´ì½˜ & ë²„ë¸” ì˜¤ë²„ë¼ì´ë“œ & ìŠ¤íŒŒí´/í‹¸íŠ¸ìš© CSS â–¼â–¼â–¼ -->
  <style id="dimo-augment">
    /* íŒ”ë ˆíŠ¸ ì´ëª¨ì§€ ì•„ì´ì½˜ (Aì•ˆ) */
    .theme-switch{ align-items: center; }
    .theme-switch .pal-icon{
      display:inline-flex; align-items:center; justify-content:center;
      width:22px; height:22px; margin-right:8px;
      border-radius:50%;
      background:linear-gradient(135deg,#ffd1c7,#ffb3b3);
      box-shadow:inset 0 0 0 2px rgba(0,0,0,.08), 0 1px 3px rgba(0,0,0,.12);
      font-size:14px; line-height:1; user-select:none; pointer-events:none;
    }
    /* ì¸íŠ¸ë¡œ ë²„ë¸” ê°€ì‹œì„± ê°•í™”(ì˜¤ë²„ë ˆì´) */
    #intro .bubbles{ z-index:3 !important; }
    #intro .bubbles span{
      opacity:.85 !important;
      background: radial-gradient(circle, rgba(255,255,255,.92), rgba(255,255,255,.2)) !important;
      box-shadow: 0 10px 28px rgba(0,0,0,.12) !important;
    }
    /* íƒ­ ìŠ¤íŒŒí´ */
    @keyframes spark-fly{
      to{
        transform: translate(calc(var(--sx) + var(--tx)), calc(var(--sy) + var(--ty))) rotate(var(--rot));
        opacity:0;
      }
    }
    #fxLayer .spark{
      position:fixed;
      left:calc(var(--x) * 1px); top:calc(var(--y) * 1px);
      --sx:-50%; --sy:-50%;
      transform:translate(var(--sx), var(--sy));
      will-change:transform, opacity;
      font-size:14px; line-height:1; filter:drop-shadow(0 2px 6px rgba(0,0,0,.25));
      animation:spark-fly 700ms ease-out forwards;
      user-select:none; pointer-events:none;
    }
    /* íŒ¨ëŸ´ë™ìŠ¤ í‹¸íŠ¸ íƒ€ê¹ƒ */
    .tilt-target{
      will-change:transform; transform-style:preserve-3d; transition:transform 60ms linear;
    }
    @media (prefers-reduced-motion: reduce){
      #fxLayer .spark{ display:none !important; }
      .tilt-target{ transition:none !important; transform:none !important; }
    }
  </style>
  <!-- â–²â–²â–² [ì¶”ê°€ ë] â–²â–²â–² -->
</head>
<body>
  <!-- í…Œë§ˆ ìŠ¤ìœ„ì²˜ -->
  <div class="theme-switch" aria-label="ìƒ‰ìƒ í…Œë§ˆ ì„ íƒ">
    <!-- [ì¶”ê°€] ì´ëª¨ì§€ ì•„ì´ì½˜ -->
    <span class="pal-icon" aria-hidden="true">ğŸ¨</span>
    <button class="sw" data-theme="mint"  title="Mint"></button>
    <button class="sw" data-theme="night" title="Night"></button>
    <button class="sw" data-theme="sun"   title="Sun"></button>
    <button class="sw" data-theme="peach" title="Peach"></button>
    <button class="sw" data-theme="blue"  title="Blue"></button>
  </div>

  <div class="pattern" aria-hidden="true"></div>

  <!-- ì¸íŠ¸ë¡œ -->
  <section id="intro" class="screen active">
    <!-- ë²„ë¸”: ì¸íŠ¸ë¡œ í™”ë©´ì—ë§Œ ì¡´ì¬ -->
    <div class="bubbles" aria-hidden="true">
      <span></span><span></span><span></span><span></span><span></span><span></span>
      <span></span><span></span><span></span><span></span><span></span><span></span>
    </div>

    <div class="intro">
      <h2 class="intro-top">ë””ëª¨ì™€ í•¨ê»˜ í•˜ëŠ”</h2>
      <h1 class="intro-main">ìƒìƒ ë†€ì´í„°</h1>

      <video autoplay muted loop playsinline webkit-playsinline poster="dimo_poster.jpg">
        <source src="dimo.mp4" type="video/mp4">
      </video>

      <button id="toForm" class="btn btn-primary">ğŸ‘‹ ë””ëª¨ ë§Œë‚˜ëŸ¬ ê°€ê¸°</button>

      <div class="footer-logo intro-footer">DIMO UNIVERSE</div>

      <!-- ì¸ì‚¬ ìŒì„± (ëœë¤ | preload none) -->
      <audio id="intro1" src="ë””ëª¨ì¸íŠ¸ë¡œì¸ì‚¬1.mp3" preload="none"></audio>
      <audio id="intro2" src="ë””ëª¨ì¸íŠ¸ë¡œì¸ì‚¬2.mp3" preload="none"></audio>
      <audio id="intro3" src="ë””ëª¨ì¸íŠ¸ë¡œì¸ì‚¬3.mp3" preload="none"></audio>
      <audio id="intro4" src="ë””ëª¨ì¸íŠ¸ë¡œì¸ì‚¬4.mp3" preload="none"></audio>
    </div>
  </section>

  <!-- ì„¤ë¬¸ -->
  <section id="formScreen" class="screen">
    <div class="wrap">
      <form id="ideaForm" novalidate>
        <div class="form-group">
          <label>1. ë””ëª¨ëŠ” ì¹œêµ¬ ë‚˜ì´ê°€ ê¶ê¸ˆí•´! *</label>
          <select id="age" required>
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
            <option value="8">8ì„¸</option><option value="9">9ì„¸</option><option value="10">10ì„¸</option>
            <option value="11">11ì„¸</option><option value="12">12ì„¸</option><option value="13">13ì„¸</option>
            <option value="14">14ì„¸</option><option value="15">15ì„¸</option><option value="16">16ì„¸</option>
            <option value="17">17ì„¸</option><option value="18">18ì„¸</option><option value="19">19ì„¸</option>
          </select>
        </div>

        <div class="form-group">
          <label>2. ë„ˆì˜ ë©‹ì§„ ë³„ëª…ì„ ì •í•´ì¤˜! *</label>
          <input id="nickname" type="text" placeholder="ì˜ˆ: ë°œëª…ì™• ë””ëª¨!" required>
        </div>

        <div class="form-group">
          <label>3. 'ì•„~ ì´ê±° ë¶ˆí¸í•˜ë‹¤!' í–ˆë˜ ìˆœê°„ì€? *</label>
          <textarea id="problem" placeholder="ì˜ˆ: ì—°í•„ì´ ìê¾¸ êµ´ëŸ¬ê°€ì„œ ìƒì–´ë²„ë ¤ìš”" required></textarea>
        </div>

        <div class="form-group">
          <label>4. ê·¸ ë¶ˆí¸ì„ í•´ê²°í•  ë©‹ì§„ ë°œëª…í’ˆ ì´ë¦„ì€? *</label>
          <input id="ideaName" type="text" placeholder="ì˜ˆ: ì•ˆ êµ´ëŸ¬ê°€ëŠ” ì—°í•„" required>
        </div>

        <div class="form-group">
          <label>5. ë°œëª…í’ˆì€ ì–´ë–»ê²Œ ì‘ë™í•˜ê³  ë­ê°€ í¸í•´ì ¸? *</label>
          <textarea id="ideaDetail" placeholder="ì˜ˆ: ì—°í•„ì— ì‘ì€ ìì„ì´ ë¶™ì–´ì„œ ì±…ìƒì— ë”± ë¶™ì–´ìš”â€¦" required></textarea>

          <div class="gauge-row">
            <div class="gauge" aria-hidden="true">
              <div class="gauge-bar" id="charBar"></div>
            </div>
            <div id="charCount" class="gcount" aria-live="polite">0ì</div>
          </div>
          <div id="charMsg" class="gmsg">ğŸŒ± ì•„ì§ ìƒê°ì˜ ì”¨ì•— ë‹¨ê³„ì˜ˆìš”.</div>
        </div>

        <!-- ì´ë©”ì¼ ì•ˆë‚´ ë° ì„ íƒ ì…ë ¥ -->
        <div class="form-group">
          <label>6. (ì„ íƒ) ë³´í˜¸ì ì´ë©”ì¼</label>
          <div style="font-size:14px;color:#2d4d38;opacity:.9;margin:6px 0 10px">
            â€» <b>êµ¿ì¦ˆ ì´ë²¤íŠ¸ ì‘ëª¨ë¥¼ ì›í•  ê²½ìš°ì—ë§Œ</b> ì´ë©”ì¼ì„ ì…ë ¥í•´ìš”. <b>ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ìŠ¤íƒ¬í”„ëŠ” ê·¸ëŒ€ë¡œ ì§„í–‰</b>ë¼ìš”.
          </div>

          <label class="consent-row" style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
            <input id="emailConsent" type="checkbox" aria-controls="emailBlock" aria-expanded="false" style="width:20px;height:20px;accent-color:var(--main)">
            <span>êµ¿ì¦ˆ ì´ë²¤íŠ¸ ì‘ëª¨ (ì„ íƒ)</span>
          </label>

          <div id="emailBlock" style="display:none;margin-left:2px">
            <input id="parentEmail" type="email" placeholder="ì˜ˆ: parent@example.com" inputmode="email" style="margin-top:4px">
            <div class="consent-note" style="font-size:14px;color:#2d4d38;opacity:.8;margin-top:6px">
              â€» ì´ë©”ì¼ì€ <b>ê²½í’ˆ(êµ¿ì¦ˆ) ë‹¹ì²¨ ì•ˆë‚´</b> ìš©ë„ë¡œë§Œ ì‚¬ìš©ë˜ë©°, í–‰ì‚¬ ì¢…ë£Œ í›„ ì¦‰ì‹œ íŒŒê¸°ë©ë‹ˆë‹¤.
            </div>
          </div>
        </div>

        <div class="center"><button type="submit" class="btn btn-primary">ì œì¶œí•˜ê¸°</button></div>
      </form>
    </div>
  </section>

  <!-- ê²°ê³¼ -->
  <section id="resultScreen" class="screen">
    <div class="wrap">
      <div id="card" class="card">
        <h2 class="banner">ë‚˜ë§Œì˜ ì•„ì´ë””ì–´ ì¹´ë“œ</h2>
        <div class="card-body">
          <img id="dimoImg" class="dimo" alt="ë””ëª¨" src="">
          <div>
            <div id="complimentText" class="cbox">ğŸ’¬ ë””ëª¨ê°€ ì‘ì› ì¤‘!</div>
            <div class="ratings">
              <div class="rating"><h3>ë°˜ì§ì´ëŠ” ìƒìƒë ¥</h3><div id="creativity" class="stars"></div></div>
              <div class="rating"><h3>ì •ë§ ë ê¹Œ? ì ìˆ˜</h3><div id="feasibility" class="stars"></div></div>
              <div class="rating"><h3>ë””ëª¨ì˜ ê¸°ìˆ ë ¥ ë ˆë²¨</h3><div id="technical" class="stars"></div></div>
            </div>
          </div>
        </div>

        <div class="info">
          <span>ğŸ‘¤ <strong>ë°œëª…ì:</strong> <span id="inventorName"></span></span>
          <span>ğŸ’¡ <strong>ë‚´ ë°œëª…í’ˆ:</strong> <span id="ideaDisplay"></span></span>
        </div>

        <div id="stampArea"></div>
        <div class="footer-logo">DIMO UNIVERSE</div>

        <!-- ê²°ê³¼ ì¹­ì°¬ ì˜¤ë””ì˜¤ -->
        <audio id="compliment1" src="ë””ëª¨ì¹­ì°¬01.mp3" preload="none"></audio>
        <audio id="compliment2" src="ë””ëª¨ì¹­ì°¬02.mp3" preload="none"></audio>
        <audio id="compliment3" src="ë””ëª¨ì¹­ì°¬03.mp3" preload="none"></audio>
        <audio id="compliment4" src="ë””ëª¨ì¹­ì°¬04.mp3" preload="none"></audio>
        <audio id="compliment5" src="ë””ëª¨ì¹­ì°¬05.mp3" preload="none"></audio>
        <audio id="compliment6" src="ë””ëª¨ ì¹­ì°¬ ë©”ì‹œì§€.mp3" preload="none"></audio>
      </div>

      <div class="center"><button id="saveBtn" class="btn btn-save">ğŸ¨ ì¹´ë“œ ì €ì¥í•˜ê¸°</button></div>
    </div>
  </section>

  <div id="toast" class="toast" role="status" aria-live="polite">ğŸ“¥ ì•¨ë²”ì— ì €ì¥ë˜ì—ˆì–´ìš”!</div>
  <div id="fxLayer" aria-hidden="true"></div>

  <script>
    const MOBILE = matchMedia('(max-width: 480px), (pointer: coarse)').matches;
    const dimoImages = ["dimo01.png","dimo02.png","dimo03.png","dimo04.png"];
    const STAR_STEP_MS = 260;

    /* ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸ ì§€ì—° ë¡œë“œ */
    async function ensureScript(src){
      if (document.querySelector(`script[src="${src}"]`)) return;
      await new Promise((resolve, reject)=>{
        const s=document.createElement('script'); s.src=src; s.async=true;
        s.onload=resolve; s.onerror=reject; document.head.appendChild(s);
      });
    }

    /* ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ */
    let AC=null;
    async function resumeAudio(){
      try{
        const C = window.AudioContext || window.webkitAudioContext;
        if(!AC && C) AC = new C();
        if(AC && AC.state === 'suspended') await AC.resume();
      }catch(e){}
    }
    async function playOne(a){
      if(!a) return false;
      try{
        await resumeAudio();
        if(a.preload === 'none') a.load();
        a.currentTime=0; a.muted=false; a.volume=Math.min(a.volume||1,1);
        await a.play();
        return true;
      }catch(e){ return false; }
    }

    /* ì½˜í˜í‹° */
    async function fireConfetti(duration=1500){
      if(!window.confetti){
        await ensureScript('https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js');
      }
      const end = Date.now() + duration;
      (function frame(){
        confetti({particleCount: 6, startVelocity: 32, spread: 360, origin:{x:Math.random(), y:Math.random()*0.4}});
        if(Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    /* ëœë¤ ì¹­ì°¬ ì˜¤ë””ì˜¤ */
    function pickRandomComplimentAudio(){
      const ids=["compliment1","compliment2","compliment3","compliment4","compliment5","compliment6"];
      const els=ids.map(id=>document.getElementById(id)).filter(Boolean);
      return els[Math.floor(Math.random()*els.length)];
    }
    async function playComplimentWithFallback(){
      const a = pickRandomComplimentAudio(); if(!a) return;
      let ok = await playOne(a);
      if(!ok){
        const rs=document.getElementById('resultScreen');
        const handler = async ()=>{ rs.removeEventListener('pointerdown', handler); await playOne(a); };
        rs.addEventListener('pointerdown', handler, {once:true});
      }
    }

    /* ì¸íŠ¸ë¡œ â†’ í¼: ìŒì„± ì¢…ë£Œ + 2ì´ˆ í›„ ì „í™˜ (ìë™ í¬ì»¤ìŠ¤ ì—†ìŒ) */
    (function(){
      const btn=document.getElementById('toForm');
      const intro=document.getElementById('intro');
      const form=document.getElementById('formScreen');
      const intros=["intro1","intro2","intro3","intro4"].map(id=>document.getElementById(id)).filter(Boolean);

      btn.addEventListener('click', async ()=>{
        await resumeAudio();
        const pick=a=>a[Math.floor(Math.random()*a.length)];
        const audio=intros.length?pick(intros):null;

        const go=()=>{
          intro.classList.remove('active');
          form.classList.add('active');
          // í¬ì»¤ìŠ¤ëŠ” ì‚¬ìš©ìê°€ ì§ì ‘ í„°ì¹˜í•  ë•Œë§Œ
        };

        if(audio){
          const started = await playOne(audio);
          if(started){ audio.onended = ()=> setTimeout(go, 2000); }
          else{ setTimeout(go, 2000); }
        }else{
          setTimeout(go, 2000);
        }
      }, {passive:true});
    })();

    /* íƒ€ì´í‹€ ë¬¼ê²°: grapheme ë‹¨ìœ„ ë¶„ë¦¬ (Intl.Segmenter) */
    (function(){
      const t = document.querySelector('.intro .intro-top');
      if(!t) return;
      const raw = t.textContent; t.textContent = ''; t.classList.add('wave');
      const splitGraphemes = (str)=>{
        if (window.Intl && typeof Intl.Segmenter === 'function') {
          const seg = new Intl.Segmenter('ko', { granularity: 'grapheme' });
          return Array.from(seg.segment(str), s => s.segment);
        }
        return Array.from(str);
      };
      splitGraphemes(raw).forEach((ch,i)=>{
        const s=document.createElement('span');
        s.textContent=ch;
        s.style.animationDelay = (i*0.08)+'s';
        t.appendChild(s);
      });
    })();

    /* íŒíŠ¸ ìŒì„± (ì²« í´ë¦­ 1íšŒ) */
    (function(){
      const once={once:true,passive:true};
      document.getElementById('nickname').addEventListener('click',()=>playOne(document.getElementById('hintNickname')),once);
      document.getElementById('problem').addEventListener('click',()=>playOne(document.getElementById('hintProblem')),once);
      document.getElementById('ideaDetail').addEventListener('click',()=>playOne(document.getElementById('hintIdeaDetail')),once);
    })();

    /* ê²Œì´ì§€ & ë©”ì‹œì§€ + ì¹´ìš´í„° */
    (function(){
      const detail=document.getElementById('ideaDetail');
      const bar=document.getElementById('charBar');
      const msg=document.getElementById('charMsg');
      const count=document.getElementById('charCount');

      function update(){
        const len=(detail.value||'').trim().length;
        const pct=Math.min(len/70*100,100);
        bar.style.width=pct+'%';
        if(count) count.textContent = `${len}ì`;

        if(len<30){
          bar.style.background='#ffcc00';
          msg.textContent='ğŸŒ± ì•„ì§ ìƒê°ì˜ ì”¨ì•— ë‹¨ê³„ì˜ˆìš”.';
        } else if(len<40){
          bar.style.background='linear-gradient(90deg,#a8e6c3,#7bd49a)';
          msg.textContent='ğŸ‰ ë””ëª¨ ìŠ¤íƒ¬í”„ íšë“!';
        } else if(len<50){
          bar.style.background='linear-gradient(90deg,#8ac7ff,#4f92ff)';
          msg.textContent='ğŸ’« ë§Œì  ê°€ëŠ¥ì„± ë„ë‹¬!';
        } else if(len<70){
          bar.style.background='linear-gradient(90deg,#a48bff,#6a5acd)';
          msg.textContent='ğŸ’ ë ˆì–´ ìŠ¤íƒ¬í”„ ì¶”ì²¨ê¶Œ íšë“!';
        } else {
          bar.style.background='linear-gradient(90deg,red,orange,yellow,green,blue,indigo,violet)';
          msg.textContent='ğŸŒˆ ë ˆì–´ ìŠ¤íƒ¬í”„ ë‹¹ì²¨ í™•ë¥  2ë°° ê°•í™”!';
        }
      }
      detail.addEventListener('input',update,{passive:true}); update();
    })();

    /* ë³„ í´ë¦­ ë°˜ì§ì„(ê¸°ì¡´ ìœ ì§€) */
    (function(){
      document.addEventListener('click',(e)=>{
        const stars = e.target.closest('.stars');
        if(!stars) return;
        stars.classList.add('twinkle');
        setTimeout(()=>stars.classList.remove('twinkle'),700);
      }, {passive:true});
    })();

    /* ì´ë©”ì¼ í† ê¸€ (ARIA) */
    (function(){
      const consent = document.getElementById('emailConsent');
      const block   = document.getElementById('emailBlock');
      const email   = document.getElementById('parentEmail');
      const toggle = ()=>{
        const on = !!consent.checked;
        block.style.display = on ? 'block' : 'none';
        consent.setAttribute('aria-expanded', on ? 'true' : 'false');
        if(!on){ email.value=''; }
      };
      consent.addEventListener('change', toggle, {passive:true}); toggle();
    })();

    /* ë„ì „ íšŸìˆ˜(1,3,5) â†’ í† ìŠ¤íŠ¸ */
    function getAttemptCount(){ const n=parseInt(localStorage.getItem('dimo_attempts')||'0',10); return Number.isFinite(n)?n:0; }
    function bumpAttempt(){ const next=getAttemptCount()+1; localStorage.setItem('dimo_attempts', String(next)); return next; }

    /* ëœë¤ ì¹­ì°¬ë¬¸êµ¬ */
    function setComplimentText(){
      const el = document.getElementById('complimentText'); if(!el) return;
      const lines = [
        "ğŸ¤© ì™€ìš°! ì‹¤í–‰ë ¥ë„ ê¸°ëŒ€ë¼",
        "ğŸ’¡ ì•„ì´ë””ì–´ê°€ í†¡! íŠ€ì—ˆì–´",
        "ğŸ‘ ë¬¸ì œì •ì˜ê°€ ê¹”ë”í–ˆì–´",
        "ğŸš€ ìƒìƒë ¥ ë ˆë²¨ì—…! ë‹¤ìŒë„ ê°€ì",
        "ğŸ”§ ì´ê±´ ì§„ì§œ ì¨ë³´ê³  ì‹¶ë‹¤",
        "ğŸ§  ì²œì¬ì˜ ëƒ„ìƒˆê°€â€¦!"
      ];
      el.textContent = 'ğŸ’¬ ' + lines[Math.floor(Math.random()*lines.length)];
    }

    /* í•˜íŠ¸ ì´í™íŠ¸ */
    function fireHearts(originEl, count=18){
      const layer = document.getElementById('fxLayer'); if(!layer||!originEl) return;
      const r = originEl.getBoundingClientRect();
      for(let i=0;i<count;i++){
        const h = document.createElement('div'); h.className='heart';
        const x = r.left + r.width*0.5 + (Math.random()-0.5)*r.width*0.8;
        const y = r.top  + r.height*0.2 + (Math.random()*8-4);
        h.style.left = x+'px'; h.style.top  = y+'px';
        h.style.animationDuration = (1.4 + Math.random()*0.8)+'s';
        h.style.filter = `hue-rotate(${Math.floor(Math.random()*40)-20}deg)`;
        layer.appendChild(h); h.addEventListener('animationend', ()=> h.remove());
      }
    }

    /* ===== ë³„ì : í•˜ë‚˜ì”© ì ë“± + ì´í›„ ìˆœì°¨ ì ë©¸(ì§€ì† ë°˜ì§) ===== */
    function animateStarsToScore(id, score){
      return new Promise(resolve=>{
        const el=document.getElementById(id); if(!el) return resolve();
        el.innerHTML = '<span class="star">â˜…</span>'.repeat(5);
        const full=Math.floor(score);
        const hasHalf = (score-full) >= 0.5;
        let idx=0, target=full + (hasHalf?1:0);

        (function step(){
          if(idx>=target){
            // ì ë“± ì™„ë£Œ í›„: ìˆœì°¨ ì ë©¸ ì‹œì‘
            startSequentialBlink(el);
            setTimeout(resolve, 250);
            return;
          }
          const s=el.children[idx];
          if(idx<full){ s.classList.add('full'); }
          else if(hasHalf){ s.classList.add('half'); }
          idx++; setTimeout(step, STAR_STEP_MS);
        })();
      });
    }
    function startSequentialBlink(starsEl){
      const lit = starsEl.querySelectorAll('.full, .half');
      lit.forEach((s,i)=>{ s.classList.add('blink'); s.style.animationDelay = (i*0.18)+'s'; });
    }

    /* ì œì¶œ ì²˜ë¦¬ */
    document.getElementById('ideaForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      await resumeAudio();

      const age=document.getElementById('age').value;
      const nickname=document.getElementById('nickname').value.trim();
      const problem=document.getElementById('problem').value.trim();
      const ideaName=document.getElementById('ideaName').value.trim();
      const ideaDetail=document.getElementById('ideaDetail').value.trim();

      const consent = document.getElementById('emailConsent').checked;
      const emailVal= document.getElementById('parentEmail').value.trim();

      if(!age||!nickname||!problem||!ideaName||ideaDetail.length<10){
        alert('ëª¨ë“  í•­ëª©ì„ ì±„ì›Œì¤˜! (ì„¤ëª…ì€ 10ì ì´ìƒ)'); return;
      }
      if(consent){
        const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(emailVal);
        if(!emailOk){ alert('ì´ë©”ì¼ í˜•ì‹ì´ ë§ì§€ ì•Šì•„! ì˜ˆ: parent@example.com'); return; }
      }

      // ê²°ê³¼ í™”ë©´ ì „í™˜
      document.getElementById('formScreen').classList.remove('active');
      document.getElementById('resultScreen').classList.add('active');

      // ë°ì´í„° ë°”ì¸ë”©
      document.getElementById('inventorName').textContent=nickname;
      document.getElementById('ideaDisplay').textContent=ideaName;
      const dimo=document.getElementById('dimoImg');
      dimo.src=dimoImages[Math.floor(Math.random()*dimoImages.length)];
      dimo.style.display='block';

      // ì ìˆ˜ ê³„ì‚°
      const len=ideaDetail.length;
      let didPerfect=false;
      const scores = (len>=40 && Math.random()<0.04)
        ? (didPerfect=true, {creativity:5,feasibility:5,technical:5})
        : {
            creativity: Math.round((3.5+Math.random()*1.5)*2)/2,
            feasibility: Math.round((3.5+Math.random()*1.5)*2)/2,
            technical: Math.round((3.5+Math.random()*1.5)*2)/2
          };

      // ë³„ì  ì• ë‹ˆ(ì ë“± + ìˆœì°¨ì ë©¸)
      await animateStarsToScore('creativity',  scores.creativity);
      await animateStarsToScore('feasibility', scores.feasibility);
      await animateStarsToScore('technical',   scores.technical);

      // ì¹­ì°¬ ë¬¸êµ¬
      setComplimentText();

      // ìŠ¤íƒ¬í”„
      let stampSrc=null;
      if(len>=30) stampSrc='ë””ëª¨ìŠ¤íƒ¬í”„01.png';
      if(didPerfect){ stampSrc='ë””ëª¨ìŠ¤íƒ¬í”„ë§Œì 02.png'; }
      else{
        let rareP = (len>=70) ? 0.06 : (len>=50) ? 0.03 : 0;
        if(Math.random()<rareP) stampSrc='ë””ëª¨ìŠ¤íƒ¬í”„ë ˆì–´03.png';
      }

      if(len>=70){ showToastMsg('ğŸ¯ ë ˆì–´ í™•ë¥  2ë°° ê°•í™”!'); }

      setTimeout(async ()=>{
        if(stampSrc){
          const card=document.getElementById('card');
          const stampArea=document.getElementById('stampArea');

          const size = Math.round(132 * 0.8);
          const offset = 18;
          const x = card.clientWidth  - size - offset;
          const y = card.clientHeight - size - offset;
          const rot = (Math.random()*8 - 4).toFixed(1);

          stampArea.innerHTML = `
            <div class="stamp-wrap" style="left:${x}px;top:${y}px;width:${size}px;height:${size}px;">
              <span class="stamp-puff"></span>
              <img src="${stampSrc}" alt="ìŠ¤íƒ¬í”„" class="stamp-img stamp-enter" style="--r:${rot}deg">
              <span class="ink-bleed"></span>
            </div>`;
          if(navigator.vibrate){ try{ navigator.vibrate(30);}catch{} }

          const attemptNo = bumpAttempt();
          if (attemptNo === 1)      showToastMsg('âœ¨ ì²« ë„ì „ ì„±ê³µ! ë©‹ì§„ ì‹œì‘ì´ì•¼!');
          else if (attemptNo === 3) showToastMsg('ğŸ’ª ì„¸ ë²ˆì§¸ ë„ì „! ê¾¸ì¤€í•¨ì´ ì¬ëŠ¥ì´ì•¼!');
          else if (attemptNo === 5) showToastMsg('ğŸš€ ë‹¤ì„¯ ë²ˆì§¸ ë„ì „! ì˜¤ëŠ˜ì˜ ë°œëª… íˆì–´ë¡œ!');
        }
        fireConfetti(1800);
        playComplimentWithFallback();
      }, 600);
    });

    function showToastMsg(msg){
      const t=document.getElementById('toast'); if(!t) return;
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(()=>t.classList.remove('show'), 1600);
    }

    /* ì €ì¥ */
    (function(){
      const btn=document.getElementById('saveBtn'), toast=document.getElementById('toast');
      function showToast(){ toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'),1600); }
      btn.addEventListener('click', async ()=>{
        await ensureScript('https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js');
        const card=document.getElementById('card');
        const scale=Math.min(MOBILE?1.2:1.5, window.devicePixelRatio||1);
        html2canvas(card,{scale, useCORS:true}).then(canvas=>{
          const link=document.createElement('a');
          link.href=canvas.toDataURL('image/png'); link.download='dimo_card.png';
          if(/iPad|iPhone|iPod/.test(navigator.userAgent)){
            const w=window.open(); if(w&&w.document) w.document.write('<img src="'+link.href+'" style="width:100%">');
          } else link.click();
          fireHearts(btn);
          showToastMsg('âœ… ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }).catch(showToast);
      }, {passive:true});
    })();
  </script>

  <!-- â–¼â–¼â–¼ [ì¶”ê°€] íŒ”ë ˆíŠ¸ ìŠ¤ìœ„ì²˜ ë³µì› ìŠ¤í¬ë¦½íŠ¸ â–¼â–¼â–¼ -->
  <script id="dimo-palette-restore">
    (function(){
      const themes = {
        mint:  { main:'#5cab6d', accent:'#a5e6b8', bg:'#f8fff9', text:'#173322' },
        night: { main:'#334155', accent:'#1f2937', bg:'#0b1220', text:'#e5e7eb' },
        sun:   { main:'#fca311', accent:'#ffd166', bg:'#fffaf2', text:'#402f0a' },
        peach: { main:'#ff7f7f', accent:'#ffb3b3', bg:'#fff8f8', text:'#3f1e1e' },
        blue:  { main:'#4f92ff', accent:'#8ac7ff', bg:'#f4f9ff', text:'#0d2040' },
      };
      const root = document.documentElement;
      document.querySelectorAll('.theme-switch .sw').forEach(sw=>{
        sw.addEventListener('click', ()=>{
          const t = themes[sw.dataset.theme]; if(!t) return;
          root.style.setProperty('--main',  t.main);
          root.style.setProperty('--accent',t.accent);
          root.style.setProperty('--bg',    t.bg);
          root.style.setProperty('--text',  t.text);
          sw.classList.add('pop'); setTimeout(()=>sw.classList.remove('pop'), 220);
        }, {passive:true});
      });
    })();
  </script>

  <!-- â–¼â–¼â–¼ [ì¶”ê°€] ì¸íŠ¸ë¡œ ì „ìš©: ë²„ë¸” ì œê±° ê°ì‹œ + íƒ­ ìŠ¤íŒŒí´ + íŒ¨ëŸ´ë™ìŠ¤ í‹¸íŠ¸ â–¼â–¼â–¼ -->
  <script id="dimo-intro-effects">
    (function(){
      const intro = document.getElementById('intro');
      const layer = document.getElementById('fxLayer');
      if(!intro || !layer) return;

      /* ì¸íŠ¸ë¡œê°€ ë¹„í™œì„±í™”ë˜ë©´ ë²„ë¸” ì œê±°(ì„±ëŠ¥) */
      const bubbles = intro.querySelector('.bubbles');
      if(bubbles){
        const mo = new MutationObserver(()=>{
          if(!intro.classList.contains('active')){ bubbles.remove(); mo.disconnect(); }
        });
        mo.observe(intro, {attributes:true, attributeFilter:['class']});
      }

      /* â‘  íƒ­ ìŠ¤íŒŒí´ */
      let last = 0;
      function spawnSparkBurst(x, y){
        const N = 10;
        for(let i=0;i<N;i++){
          const el = document.createElement('span');
          el.className = 'spark';
          el.textContent = (i%3===0) ? 'âœ¦' : (i%4===0 ? 'â˜…' : 'âœ§');
          const ang = Math.random()*Math.PI*2;
          const r   = 40 + Math.random()*60;
          const tx  = Math.cos(ang)*r + 'px';
          const ty  = Math.sin(ang)*r + 'px';
          el.style.setProperty('--x', x);
          el.style.setProperty('--y', y);
          el.style.setProperty('--tx', tx);
          el.style.setProperty('--ty', ty);
          el.style.setProperty('--rot', (Math.random()-.5)+'turn');
          el.style.fontSize = (10 + Math.random()*8) + 'px';
          el.style.color = `hsl(${200 + Math.random()*140},85%,60%)`;
          layer.appendChild(el);
          el.addEventListener('animationend', ()=> el.remove(), {once:true});
        }
      }
      intro.addEventListener('pointerdown', (e)=>{
        const now = performance.now();
        if(now - last < 80) return;
        last = now;
        spawnSparkBurst(e.clientX, e.clientY);
      }, {passive:true});

      /* â‘¡ íŒ¨ëŸ´ë™ìŠ¤ í‹¸íŠ¸ */
      if (matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      const targets = [
        intro.querySelector('.intro-main'),
        intro.querySelector('video'),
        intro.querySelector('#toForm')
      ].filter(Boolean);
      targets.forEach(el=> el.classList.add('tilt-target'));

      function tilt(e){
        const rect = intro.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top  + rect.height/2;
        const nx = (e.clientX - cx) / rect.width;
        const ny = (e.clientY - cy) / rect.height;
        const MAX_DEG = 6, MAX_MOVE = 6;
        const rx = -ny * MAX_DEG, ry = nx * MAX_DEG;
        const tx = nx * MAX_MOVE,  ty = ny * MAX_MOVE;
        for(const el of targets){
          el.style.transform = `translate3d(${tx}px, ${ty}px, 0) rotateX(${rx}deg) rotateY(${ry}deg)`;
        }
      }
      function reset(){ for(const el of targets){ el.style.transform = 'translate3d(0,0,0) rotateX(0) rotateY(0)'; } }
      intro.addEventListener('pointermove', tilt,   {passive:true});
      intro.addEventListener('pointerleave', reset, {passive:true});
    })();
  </script>
  <!-- â–²â–²â–² [ì¶”ê°€ ë] â–²â–²â–² -->
</body>
</html>
